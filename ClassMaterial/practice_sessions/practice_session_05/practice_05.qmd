---
title: "Practice Session 5"
format: pdf
editor: source
editor_options: 
  chunk_output_type: console
---


In this practice section we will introduce the bootstrap distribution, bootstrap confidence interval, and hypothesis testing. 

You may use the functions: `sample()`, `do_it` to create the bootstrap distribution.


# Part 1: Confidence interval concept

**Practice 1.a:**

True or False: Confidence interval interpretation

A catalog sales company promises to deliver orders placed on the Internet within 3 days. Follow-up calls to a few randomly selected customers show that a $95\%$ confidence interval for the proportion of all orders that arrive on time is $85 \% \pm 5 \%$.


1.) Between $80\%$ and $90\%$ of all orders arrive on time.

2.) Ninety five percent of all random samples of customers will show that $85\%$ of orders arrive on time.

3.) One can be $95\%$ confident that the true population proportion of orders that arrive within 3 days is between $80\%$ and $90\%$

4.) We are $95\%$  sure that between $80\%$ and $90\%$ of the orders placed by the sampled customers arrived on time.

5.) There is a $95\%$ chance that on any given day, a customer has a $80\%$ to $90\%$ chance of receiving his package on time.


**Answers:**

1.) Not correct. This statement implies certainty. There is no level of confidence in the statement.

2.) Not correct. Different samples will give different results. Many fewer than $95\%$ of samples are expected to have exactly $88\%$ on-time orders.

3.) Correct. A confidence interval should say something about the unknown population proportion, not the sample proportion in different samples.

4.) Not correct. We know that $88\%$ of the orders arrived on time. There is no need to make an interval for the sample proportion.

5.) Not correct. The interval should be about the proportion of on-time orders, not the days.

**Practice 1.b: **

True or False: confidence level, Sample size, confidence interval

Several factors are involved in the creation of a confidence interval. Among them are the sample size, the level of confidence, and the margin of error. 

1.) For a given sample size, higher confidence means a larger margin of error.

2.) For a specified confidence level, smaller samples provide smaller margins of error.

3.) For a fixed margin of error, larger samples provide greater confidence.

4.) For a given confidence level, halving the margin of error requires a sample twice as large.

**Answers:**

1.) True. For a given sample size, higher confidence means a larger margin of error.

2.) False. Smaller samples lead to larger  standard errors, which lead to larger margins of error.

3.) True. Larger samples are less variable, which makes us more confident that a given confidence interval succeeds in catching the population proportion.

4.) False. The margin of error decreases as the square root of the sample size increases. Halving the margin of error requires a sample four times as large as the original.

$\\$

## Part 2: Construct Bootstrap Distribution 

Here’s the clever idea: We don’t have the population, but we have a sample. Probably the sample is similar to the population in many ways.So let’s sample from our sample. We’ll call it `bootstrapping`. We want samples the same size as our original sample, so we will need to sample with replacement.This means that we may pick some members of the population more than once and others not at all. We’ll replicate this many times.


**Generating a Bootstrap Distribution:**

* Generate bootstrap samples by sampling with replacement from the original sample, using the same sample size.

* Compute the statistic of interest( called a bootstrap statistic), for each of the bootstrap samples.

* Collect the statistics for many bootstrap samples to create a bootstrap distribution.


**Example:**

Using StatKey link from the text book: `https://www.lock5stat.com/StatKey/bootstrap_1_quant/bootstrap_1_quant.html`

Try to play with the creation of the bootstrap distribution from different data. The following picture shows the website and an example of bootstrap CI for `Price` from the data `MustangPrcice`.


![](statkey_bootstap.png) 


**Practice 2:**

We will use  `CarDepreciation` data from ` Library(Lock5Data)` to create a bootstrap sampling distribution of the sample mean of the ` Depreciation`


* Load the data
```{r}
library(SDS1000)
data(CarDepreciation)
```


2.1) First  Create a one bootstrap sample from `Depreciation` . You might use the functions `sample`.


```{r}
set.seed(1000)
sample_one <- sample(CarDepreciation$Depreciation, 
                    size = 20, replace = T)
```

2.2) Second, you might replicate this one sample `10000` times `with replacement` using the functiopn ` do_it()` to create a `bootstrap sampling ditribution`

```{r}
set.seed(1000)

boot_dist <- do_it(10000) * {
  sample_one = sample(CarDepreciation$Depreciation, size = 20, replace = T)
  mean( sample_one)
  }
```

2.3) Third, create a `histogram` for the bootstrap distribution of `depreciation` 

```{r}
hist(boot_dist, main ="Bootstrap Sampling Distribution of Car Depreciation ",
                xlab = "Estimated Mean Car Depreciation")

```

$\\$

## Part 3: Construct Bootstrap Confidence Interval

The steps to Construct Bootstrap Confidence Interval are: 

1. Compute the statistic from the original sample.

2. Create a bootstrap distribution by resampling from the sample.
* same size samples as the original sample
* with replacement
* compute the statistic for each sample.
The distribution of these statistics is the bootstrap distribution.

3. Estimate the standard error SE by computing the standard deviation of the bootstrap distribution.

4. $95\%$  CI is: $statistic\pm 2*SE$


**Practice 3:**

From the `CarDepreciation` bootstarap sampling distribution you have created in the previous practice, create a $95\%$  CI for the the sample mean of the `Depreciation`.

1.) Calculate the mean of Car Depreciation from your original sample

```{r}
x_bar <- mean(CarDepreciation$Depreciation )

x_bar
```

2.) Calculate the standard error of our bootstrap sampling distribution of the `depreciation` :

```{r}
boot_se <- sd(boot_dist )

boot_se
```


3.) Calculate the $95\%$ CI, which is based on the formula:$statistic\pm 2*SE$

```{r}

#CI_lower <- x_bar - 2*boot_se
#CI_upper <- x_bar + 2*boot_se

CI_lower_upper <- x_bar+2*boot_se*c(1,-1)

CI_lower_upper


```


$\\$

## Part 4:Create Bootstrap Confidence Interval with Percentiles

**Practice 4:**

Let create a $95\%$ , $90\%$ , $99\%$ CI of the mean `Depreciation` of the cars using quantiles. 

```{r}
CI_95_lower_upper <- quantile(boot_dist, c(0.025, 0.975))

CI_90_lower_upper<-  quantile(boot_dist, c(0.05, 0.95))

CI_99_lower_upper <- quantile(boot_dist, c(0.005, 0.995))

```


## Part 5: Hypothesis testing 

**Statistical Tests:**

A statistical test is used to determine whether results from a sample are convincing enough to allow us to conclude something about the population.

 We have two competing claims about the population, the `null hypothesis`, denoted by `H0`, and the `alternative hypothesis`, denoted by `Ha`.
 
**Practice 5:**
 
State the null and alternative hypotheses for the statistical test described:

1.) Testing to see if there is evidence that a mean
is less than 50.

2.) Testing to see if there is evidence that a proportion is greater than 0.3

3.) Testing to see if there is evidence that the mean
of group A is not the same as the mean of group B

4.) Testing to see if there is evidence that the
correlation between two variables is negative
